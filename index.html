<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CENG 291 Quiz</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body>
    <div id="root"></div>
    
    <script type="text/babel">
      const { useState, useEffect } = React;
      
      const AlertCircle = ({ className }) => (
        <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <circle cx="12" cy="12" r="10" />
          <line x1="12" y1="8" x2="12" y2="12" />
          <line x1="12" y1="16" x2="12.01" y2="16" />
        </svg>
      );
      
      const Lock = ({ className }) => (
        <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
          <path d="M7 11V7a5 5 0 0 1 10 0v4" />
        </svg>
      );
      
      const CheckCircle = ({ className }) => (
        <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
          <polyline points="22 4 12 14.01 9 11.01" />
        </svg>
      );
      
      const Timer = ({ className }) => (
        <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <circle cx="12" cy="12" r="10" />
          <polyline points="12 6 12 12 16 14" />
        </svg>
      );

      const QuizApp = () => {
        const [view, setView] = useState("start");
        const [studentName, setStudentName] = useState("");
        const [indexNumber, setIndexNumber] = useState("");
        const [programme, setProgramme] = useState("");
        const [currentQuestion, setCurrentQuestion] = useState(0);
        const [answers, setAnswers] = useState({});
        const [questionTimeLeft, setQuestionTimeLeft] = useState(20);
        const [tabSwitches, setTabSwitches] = useState(0);
        const [quizSubmitted, setQuizSubmitted] = useState(false);
        const [adminPassword, setAdminPassword] = useState("");
        const [showAdminLogin, setShowAdminLogin] = useState(false);

        const questions = [
          {
            id: 1,
            type: "mcq",
            question: "Which statement best contrasts Utilitarianism with Respect for Persons?",
            options: [
              "Utilitarianism focuses on individual rights; Respect for Persons focuses on the majority",
              "Utilitarianism seeks to maximize overall well-being; Respect for Persons protects individual moral agency",
              "Utilitarianism is only for personal life; Respect for Persons is only for business",
              "They are the same theory under different names",
            ],
            correctAnswer: "Utilitarianism seeks to maximize overall well-being; Respect for Persons protects individual moral agency",
          },
          {
            id: 2,
            type: "mcq",
            question: "Ethical Egoism is a view that challenges standard ethical theories by claiming:",
            options: [
              "We should always act in the interest of the environment",
              "Our only duty is to maximize our own good",
              "We should always follow the commands of God",
              "All moral values are relative to one's culture",
            ],
            correctAnswer: "Our only duty is to maximize our own good",
          },
          {
            id: 3,
            type: "mcq",
            question: "The Washington Accord is primarily focused on:",
            options: [
              "Establishing international building codes for skyscrapers",
              "Mutual recognition of engineering educational qualifications across different countries",
              "Banning the use of chemical weapons globally",
              "Regulating the sales of driverless cars in the US",
            ],
            correctAnswer: "Mutual recognition of engineering educational qualifications across different countries",
          },
          {
            id: 4,
            type: "mcq",
            question: "Which is a characteristic of Tight Coupling in a technological system?",
            options: [
              "There is a lot of time to correct a failure before it spreads",
              "Processes are connected such that a failure in one quickly affects another",
              "It is very easy to predict all consequences of a failure",
              "It is only found in small, non-complex machines",
            ],
            correctAnswer: "Processes are connected such that a failure in one quickly affects another",
          },
          {
            id: 5,
            type: "mcq",
            question: "In Standard Experiments, the group that does not receive the special experimental treatment is called the:",
            options: [
              "Variable group",
              "Test group",
              "Control group",
              "Focus group",
            ],
            correctAnswer: "Control group",
          },
          {
            id: 6,
            type: "mcq",
            question: "Using the Self-Defeating Test, an engineer decides not to fudge test data. Their reasoning is:",
            options: [
              "If everyone fudged data, then data would become untrustworthy and the purpose of providing data would be undermined",
              "My boss will fire me if I get caught fudging the data",
              "It is cheaper to tell the truth in the long run due to litigation costs",
              "I have a legal right to be honest under the Constitution",
            ],
            correctAnswer: "If everyone fudged data, then data would become untrustworthy and the purpose of providing data would be undermined",
          },
          {
            id: 7,
            type: "mcq",
            question: "When evaluating Acceptable Risk, the layperson's approach often differs from the expert's because the layperson:",
            options: [
              "Ignores all scientific data and relies only on emotion",
              "Values informed consent and the just distribution of risk",
              "Only cares about the total number of statistically expected deaths",
              "Always believes that zero risk is physically possible in every technology",
            ],
            correctAnswer: "Values informed consent and the just distribution of risk",
          },
          {
            id: 8,
            type: "mcq",
            question: "The Capabilities Approach to risk assessment is arguably superior to traditional methods because it:",
            options: [
              "Is much faster to calculate than cost-benefit analysis",
              "Focuses on the real freedom of individuals to achieve what they value rather than just focal harms",
              "Excludes all psychological and social impacts to remain objective",
              "Does not require any statistical data to reach a conclusion",
            ],
            correctAnswer: "Focuses on the real freedom of individuals to achieve what they value rather than just focal harms",
          },
          {
            id: 9,
            type: "mcq",
            question: "How should an engineer resolve a conflict between a duty to their employer (Canon 4) and the safety of the public (Canon 1)?",
            options: [
              "The duty to the employer always takes precedence in a business setting",
              "The safety of the public is \"paramount\" and must take precedence over the duty to the employer",
              "They should flip a coin to remain unbiased and objective",
              "They should follow the instructions of the most senior manager present to ensure organizational harmony",
            ],
            correctAnswer: "The safety of the public is \"paramount\" and must take precedence over the duty to the employer",
          },
          {
            id: 10,
            type: "mcq",
            question: "From the perspective of Environmental Ethics, the Cradle to Cradle approach is defined by:",
            options: [
              "Simply throwing away products once they reach their \"grave\" (the landfill)",
              "Designing products so that all components can be upcycled or returned to the earth safely",
              "Minimizing the cost of raw material extraction at the start of a project",
              "Using the most advanced military technology to protect endangered forests",
            ],
            correctAnswer: "Designing products so that all components can be upcycled or returned to the earth safely",
          },
        ];

        const ADMIN_PASSWORD = "admin123";
        const TIME_PER_QUESTION = 20;
        const TAB_SWITCH_PENALTY = 0.5;
        const SHEET_NAME = "Sheet1";

        useEffect(() => {
          if (view === "quiz") {
            const handleContextMenu = (e) => e.preventDefault();
            document.addEventListener("contextmenu", handleContextMenu);

            document.body.style.userSelect = "none";
            document.body.style.webkitUserSelect = "none";

            const handleVisibilityChange = () => {
              if (document.hidden) {
                setTabSwitches((prev) => prev + 1);
              }
            };
            document.addEventListener("visibilitychange", handleVisibilityChange);

            const handleCopy = (e) => e.preventDefault();
            document.addEventListener("copy", handleCopy);
            document.addEventListener("cut", handleCopy);
            document.addEventListener("paste", handleCopy);

            return () => {
              document.removeEventListener("contextmenu", handleContextMenu);
              document.removeEventListener("visibilitychange", handleVisibilityChange);
              document.removeEventListener("copy", handleCopy);
              document.removeEventListener("cut", handleCopy);
              document.removeEventListener("paste", handleCopy);
              document.body.style.userSelect = "auto";
              document.body.style.webkitUserSelect = "auto";
            };
          }
        }, [view]);

        useEffect(() => {
          if (view === "quiz" && questionTimeLeft > 0) {
            const timer = setTimeout(() => {
              setQuestionTimeLeft((prev) => prev - 1);
            }, 1000);
            return () => clearTimeout(timer);
          } else if (view === "quiz" && questionTimeLeft === 0) {
            handleAutoNext();
          }
        }, [view, questionTimeLeft]);

        const handleAutoNext = () => {
          if (currentQuestion < questions.length - 1) {
            setCurrentQuestion((prev) => prev + 1);
            setQuestionTimeLeft(TIME_PER_QUESTION);
          } else {
            handleSubmitQuiz();
          }
        };

        const handleStartQuiz = async () => {
          if (!studentName.trim() || !indexNumber.trim() || !programme) {
            alert("Please enter your name, index number, and select your programme");
            return;
          }

          const startButton = document.querySelector("button");
          if (startButton) startButton.disabled = true;

          try {
            const GOOGLE_SCRIPT_URL =
              "https://script.google.com/macros/s/AKfycbzQ49ebOvpIuttMBXh7gkCRU857mK6T0Hr3v4yiEisPzHjwHdaPFyD744kWGVu81KymqA/exec";

            const response = await fetch(`${GOOGLE_SCRIPT_URL}?sheet=${SHEET_NAME}`);
            const data = await response.json();

            const alreadyTaken = data.some((record) => {
              const recordIndex = String(record.indexNumber).trim();
              const inputIndex = String(indexNumber).trim();
              return recordIndex === inputIndex;
            });

            if (alreadyTaken) {
              alert(
                "This index number has already been used to take the quiz. You cannot take the quiz again."
              );
              if (startButton) startButton.disabled = false;
              return;
            }

            setView("quiz");
            setQuestionTimeLeft(TIME_PER_QUESTION);
          } catch (error) {
            console.error("Error checking index number:", error);
            alert(
              "Error checking records. Please try again or contact your instructor."
            );
            if (startButton) startButton.disabled = false;
          }
        };

        const handleAnswerChange = (questionId, answer) => {
          setAnswers((prev) => ({
            ...prev,
            [questionId]: answer,
          }));
        };

        const calculateScore = () => {
          let correct = 0;
          questions.forEach((q) => {
            const studentAnswer = answers[q.id];
            if (studentAnswer === q.correctAnswer) {
              correct++;
            }
          });

          const tabPenalty = tabSwitches * TAB_SWITCH_PENALTY;
          const finalScore = Math.max(0, correct - tabPenalty);

          return {
            rawScore: correct,
            tabPenalty,
            finalScore,
          };
        };

        const handleSubmitQuiz = async () => {
          if (quizSubmitted) return;

          const { rawScore, tabPenalty, finalScore } = calculateScore();
          const totalQuestions = questions.length;
          const percentage = ((finalScore / totalQuestions) * 100).toFixed(1);

          const result = {
            studentName,
            indexNumber,
            programme,
            rawScore,
            tabSwitches,
            tabPenalty,
            finalScore,
            totalQuestions,
            percentage,
            timestamp: new Date().toLocaleString(),
          };

          setQuizSubmitted(true);

          try {
            const GOOGLE_SCRIPT_URL =
              "https://script.google.com/macros/s/AKfycbzQ49ebOvpIuttMBXh7gkCRU857mK6T0Hr3v4yiEisPzHjwHdaPFyD744kWGVu81KymqA/exec";

            await fetch(`${GOOGLE_SCRIPT_URL}?sheet=${SHEET_NAME}`, {
              method: "POST",
              mode: "no-cors",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(result),
            });

            console.log("Results submitted successfully to Sheet1");
          } catch (error) {
            console.error("Error submitting results:", error);
          }

          setView("thankyou");
        };

        const handleAdminLogin = () => {
          if (adminPassword === ADMIN_PASSWORD) {
            setView("admin");
          } else {
            alert("Incorrect password");
          }
        };

        const AdminView = () => {
          const [results, setResults] = useState([]);
          const [loading, setLoading] = useState(true);

          useEffect(() => {
            loadResultsFromSheets();
          }, []);

          const loadResultsFromSheets = async () => {
            setLoading(true);
            try {
              const GOOGLE_SCRIPT_URL =
                "https://script.google.com/macros/s/AKfycbzQ49ebOvpIuttMBXh7gkCRU857mK6T0Hr3v4yiEisPzHjwHdaPFyD744kWGVu81KymqA/exec";

              const response = await fetch(`${GOOGLE_SCRIPT_URL}?sheet=${SHEET_NAME}`);
              const data = await response.json();

              setResults(data);
              setLoading(false);
            } catch (error) {
              console.error("Error loading results:", error);
              setLoading(false);
            }
          };

          const calculateStats = () => {
            if (results.length === 0)
              return { highest: 0, average: 0, lowest: 0 };

            const scores = results.map((r) => {
              const scoreStr = r.finalScore.toString();
              const numericScore = parseFloat(scoreStr.split("/")[0]);
              return numericScore;
            });

            const highest = Math.max(...scores);
            const lowest = Math.min(...scores);
            const average = (
              scores.reduce((a, b) => a + b, 0) / scores.length
            ).toFixed(1);

            return { highest, lowest, average };
          };

          const stats = calculateStats();

          return (
            <div className="min-h-screen bg-gray-50 p-6">
              <div className="max-w-7xl mx-auto">
                <div className="bg-white rounded-lg shadow-md p-6 mb-6">
                  <div className="flex justify-between items-center mb-4">
                    <h2 className="text-2xl font-bold">
                      Admin Dashboard - CENG 291 Quiz
                    </h2>
                    <div className="flex gap-2">
                      <button
                        onClick={() => loadResultsFromSheets()}
                        className="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"
                      >
                        Refresh
                      </button>
                      <button
                        onClick={() => setView("start")}
                        className="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"
                      >
                        Exit Admin
                      </button>
                    </div>
                  </div>

                  {loading ? (
                    <p>Loading results from Google Sheets...</p>
                  ) : results.length === 0 ? (
                    <p className="text-gray-500">No quiz submissions yet.</p>
                  ) : (
                    <>
                      <div className="mb-4">
                        <p className="text-lg font-semibold text-gray-700">
                          All Submissions (Sheet1)
                        </p>
                      </div>

                      <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div className="bg-blue-50 rounded-lg p-4">
                          <p className="text-sm text-blue-600 font-semibold mb-1">
                            Total Submissions
                          </p>
                          <p className="text-3xl font-bold text-blue-700">
                            {results.length}
                          </p>
                        </div>
                        <div className="bg-green-50 rounded-lg p-4">
                          <p className="text-sm text-green-600 font-semibold mb-1">
                            Highest Score
                          </p>
                          <p className="text-3xl font-bold text-green-700">
                            {stats.highest}/{questions.length}
                          </p>
                        </div>
                        <div className="bg-yellow-50 rounded-lg p-4">
                          <p className="text-sm text-yellow-600 font-semibold mb-1">
                            Average Score
                          </p>
                          <p className="text-3xl font-bold text-yellow-700">
                            {stats.average}/{questions.length}
                          </p>
                        </div>
                        <div className="bg-red-50 rounded-lg p-4">
                          <p className="text-sm text-red-600 font-semibold mb-1">
                            Lowest Score
                          </p>
                          <p className="text-3xl font-bold text-red-700">
                            {stats.lowest}/{questions.length}
                          </p>
                        </div>
                      </div>

                      <div className="mb-4">
                        <p className="text-xs text-gray-500">
                          Data synced with Google Sheets (Sheet1) | Each tab switch = -0.5 points penalty
                        </p>
                      </div>

                      <div className="overflow-x-auto">
                        <table className="min-w-full divide-y divide-gray-200">
                          <thead className="bg-gray-50">
                            <tr>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">#</th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Name</th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Index Number</th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Programme</th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Raw Score</th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Tab Switches</th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Penalty</th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Final Score</th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Percentage</th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Timestamp</th>
                            </tr>
                          </thead>
                          <tbody className="bg-white divide-y divide-gray-200">
                            {results.map((result, idx) => (
                              <tr key={idx}>
                                <td className="px-4 py-4 whitespace-nowrap text-sm font-semibold text-gray-600">{idx + 1}</td>
                                <td className="px-4 py-4 whitespace-nowrap text-sm">{result.studentName}</td>
                                <td className="px-4 py-4 whitespace-nowrap text-sm">{result.indexNumber}</td>
                                <td className="px-4 py-4 whitespace-nowrap text-sm">{result.programme}</td>
                                <td className="px-4 py-4 whitespace-nowrap text-sm font-semibold">{result.rawScore}</td>
                                <td className="px-4 py-4 whitespace-nowrap text-sm">{result.tabSwitches}</td>
                                <td className="px-4 py-4 whitespace-nowrap text-sm text-red-600">{result.tabPenalty}</td>
                                <td className="px-4 py-4 whitespace-nowrap text-sm">
                                  <span className="font-bold text-indigo-600">{result.finalScore}</span>
                                </td>
                                <td className="px-4 py-4 whitespace-nowrap">
                                  <span className="px-2 py-1 rounded text-sm font-semibold bg-gray-100 text-gray-800">{result.percentage}</span>
                                </td>
                                <td className="px-4 py-4 whitespace-nowrap text-xs text-gray-500">{result.timestamp}</td>
                              </tr>
                            ))}
                          </tbody>
                        </table>
                      </div>
                    </>
                  )}
                </div>

                <div className="text-center mt-6">
                  <p className="text-sm text-gray-500">©Team Benny</p>
                </div>
              </div>
            </div>
          );
        };

        if (view === "admin") {
          return <AdminView />;
        }

        if (view === "start") {
          return (
            <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4">
              <div className="max-w-md w-full">
                <div className="bg-white rounded-lg shadow-xl p-8">
                  <div className="text-center mb-6">
                    <Lock className="mx-auto h-12 w-12 text-indigo-600 mb-3" />
                    <h1 className="text-3xl font-bold text-gray-800 mb-2">
                      CENG 291 Quiz
                    </h1>
                    <p className="text-gray-600">Engineering Ethics</p>
                  </div>

                  <div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6">
                    <div className="flex">
                      <AlertCircle className="h-5 w-5 text-yellow-400 mr-2 flex-shrink-0" />
                      <div className="text-sm text-yellow-700">
                        <p className="font-semibold mb-1">Quiz Rules:</p>
                        <ul className="list-disc list-inside space-y-1">
                          <li>{questions.length} questions total</li>
                          <li>20 seconds per question</li>
                          <li>Auto-advances when time expires</li>
                          <li>Tab switching: -0.5 points each</li>
                          <li>Text selection disabled</li>
                          <li>Right-click disabled</li>
                        </ul>
                      </div>
                    </div>
                  </div>

                  <div className="space-y-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">
                        Full Name
                      </label>
                      <input
                        type="text"
                        value={studentName}
                        onChange={(e) => setStudentName(e.target.value)}
                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                        placeholder="Enter your full name"
                      />
                    </div>

                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">
                        Index Number
                      </label>
                      <input
                        type="text"
                        value={indexNumber}
                        onChange={(e) => setIndexNumber(e.target.value)}
                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                        placeholder="Enter your index number"
                      />
                    </div>

                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">
                        Programme
                      </label>
                      <select
                        value={programme}
                        onChange={(e) => setProgramme(e.target.value)}
                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                      >
                        <option value="">Select your programme</option>
                        <option value="Materials Engineering">Materials Engineering</option>
                        <option value="Metallurgical Engineering">Metallurgical Engineering</option>
                      </select>
                    </div>

                    <button
                      onClick={handleStartQuiz}
                      className="w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 transition duration-200"
                    >
                      Start Quiz
                    </button>

                    <button
                      onClick={() => setShowAdminLogin(!showAdminLogin)}
                      className="w-full text-sm text-gray-500 hover:text-gray-700 mt-4"
                    >
                      {showAdminLogin ? "Hide Admin Login" : "Admin Login"}
                    </button>

                    {showAdminLogin && (
                      <div className="mt-4 p-4 bg-gray-50 rounded-lg">
                        <input
                          type="password"
                          value={adminPassword}
                          onChange={(e) => setAdminPassword(e.target.value)}
                          placeholder="Admin Password"
                          className="w-full px-4 py-2 border border-gray-300 rounded-lg mb-2"
                        />
                        <button
                          onClick={handleAdminLogin}
                          className="w-full bg-gray-600 text-white py-2 rounded-lg hover:bg-gray-700"
                        >
                          Login as Admin
                        </button>
                      </div>
                    )}
                  </div>
                </div>

                <div className="text-center mt-6">
                  <p className="text-sm text-gray-400">©Team Benny</p>
                </div>
              </div>
            </div>
          );
        }

        if (view === "thankyou") {
          return (
            <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4">
              <div className="max-w-md w-full">
                <div className="bg-white rounded-lg shadow-xl p-8">
                  <div className="text-center">
                    <CheckCircle className="mx-auto h-16 w-16 text-green-500 mb-4" />
                    <h2 className="text-3xl font-bold text-gray-800 mb-2">
                      Quiz Submitted Successfully!
                    </h2>
                    <p className="text-gray-600 mb-6">Thank you, {studentName}</p>
                    <div className="bg-blue-50 rounded-lg p-6 mb-6">
                      <p className="text-gray-700 text-lg">
                        Your responses have been recorded and submitted to your instructor.
                      </p>
                    </div>
                    <p className="text-sm text-gray-500">
                      Results will be shared by your instructor.
                    </p>
                  </div>
                </div>

                <div className="text-center mt-6">
                  <p className="text-sm text-gray-400">©Team Benny</p>
                </div>
              </div>
            </div>
          );
        }

        const question = questions[currentQuestion];
        const progress = ((currentQuestion + 1) / questions.length) * 100;

        const handleNext = () => {
          if (currentQuestion < questions.length - 1) {
            setCurrentQuestion((prev) => prev + 1);
            setQuestionTimeLeft(TIME_PER_QUESTION);
          } else {
            handleSubmitQuiz();
          }
        };

        return (
          <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
            <div className="max-w-3xl mx-auto">
              <div className="bg-white rounded-lg shadow-md p-4 mb-4">
                <div className="flex justify-between items-center mb-2">
                  <div className="flex items-center space-x-4">
                    <span className="text-sm font-semibold text-gray-700">
                      {studentName} ({indexNumber})
                    </span>
                    <span className="text-xs px-2 py-1 bg-indigo-100 text-indigo-800 rounded">
                      {programme}
                    </span>
                  </div>
                  <div className="flex items-center space-x-3">
                    {tabSwitches > 0 && (
                      <span className="text-sm text-red-600 font-semibold">
                        ⚠️ Switches: {tabSwitches} (-{(tabSwitches * TAB_SWITCH_PENALTY).toFixed(1)})
                      </span>
                    )}
                    <div className="flex items-center space-x-2">
                      <Timer
                        className={`h-5 w-5 ${questionTimeLeft <= 5 ? "text-red-600" : "text-indigo-600"}`}
                      />
                      <span
                        className={`font-mono font-bold text-xl ${questionTimeLeft <= 5 ? "text-red-600 animate-pulse" : "text-gray-700"}`}
                      >
                        {questionTimeLeft}s
                      </span>
                    </div>
                  </div>
                </div>

                <div className="flex justify-between text-sm text-gray-600 mb-2">
                  <span>Question {currentQuestion + 1} of {questions.length}</span>
                </div>

                <div className="w-full bg-gray-200 rounded-full h-2">
                  <div
                    className="bg-indigo-600 h-2 rounded-full transition-all duration-300"
                    style={{ width: `${progress}%` }}
                  />
                </div>
              </div>

              <div className="bg-white rounded-lg shadow-md p-8">
                <h2 className="text-lg font-bold text-gray-800 mb-6 leading-relaxed">
                  {question.question}
                </h2>

                <div className="space-y-3">
                  {question.options.map((option, idx) => (
                    <label
                      key={idx}
                      className="flex items-start p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-indigo-400 hover:bg-indigo-50 transition duration-200"
                    >
                      <input
                        type="radio"
                        name={`question-${question.id}`}
                        value={option}
                        checked={answers[question.id] === option}
                        onChange={(e) => handleAnswerChange(question.id, e.target.value)}
                        className="mt-1 mr-3 h-4 w-4 text-indigo-600 flex-shrink-0"
                      />
                      <span className="text-gray-700">{option}</span>
                    </label>
                  ))}
                </div>

                <div className="flex justify-end mt-8">
                  <button
                    onClick={handleNext}
                    className={`px-8 py-3 rounded-lg font-semibold ${
                      currentQuestion === questions.length - 1
                        ? "bg-green-600 hover:bg-green-700"
                        : "bg-indigo-600 hover:bg-indigo-700"
                    } text-white`}
                  >
                    {currentQuestion === questions.length - 1 ? "Submit Quiz" : "Next Question"}
                  </button>
                </div>
              </div>

              <div className="text-center mt-6">
                <p className="text-sm text-gray-400">©Team Benny</p>
              </div>
            </div>
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<QuizApp />);
    </script>
  </body>
</html>
